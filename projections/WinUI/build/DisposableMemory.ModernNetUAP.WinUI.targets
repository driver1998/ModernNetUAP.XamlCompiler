<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<PropertyGroup>
		<PkgMicrosoft_WebView2 Condition="'$(PkgMicrosoft_WebView2)'==''">$([MSBuild]::NormalizeDirectory('$(NuGetPackageRoot)', 'microsoft.web.webview2', '$(_PkgWebView2_Version)'))</PkgMicrosoft_WebView2>
	</PropertyGroup>

	<Target Name="WinUIXamlCompileReferenceWrap" BeforeTargets="XamlCompilePass1ReferenceWrap">
		<ItemGroup>
			<!-- If WinUI 2 NuGet package is referenced in the main project, 
			     WinForms and WPF versions of WebView2 will be referenced
				 despite we don't reference WinForms or WPF.
				 XAML compile will fail in this case, so remove them. -->
			<ReferencePath Condition="('$(UseWPF)' != 'true') And ('$(UseWindowsForms)' != 'true')" Remove="$(PkgMicrosoft_WebView2)lib\**\Microsoft.Web.WebView2.Core.dll" />
			<ReferencePath Condition="('$(UseWindowsForms)' != 'true')" Remove="$(PkgMicrosoft_WebView2)lib\**\Microsoft.Web.WebView2.WinForms.dll" />
			<ReferencePath Condition="('$(UseWPF)' != 'true')" Remove="$(PkgMicrosoft_WebView2)lib\**\Microsoft.Web.WebView2.Wpf.dll" />
		</ItemGroup>
	</Target>
</Project>